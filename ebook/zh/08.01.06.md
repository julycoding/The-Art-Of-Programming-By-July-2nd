#### 密匙四、Trie树/数据库/倒排索引

**Trie树**

适用范围：数据量大，重复多，但是数据种类小可以放入内存

基本原理及要点：实现方式，节点孩子的表示方式

扩展：压缩实现。

问题实例：

1. 上面的**第2题**：寻找热门查询：查询串的重复度比较高，虽然总数是1千万，但如果除去重复后，不超过3百万个，每个不超过255字节。
2. 上面的**第5题**：有10个文件，每个文件1G，每个文件的每一行都存放的是用户的query，每个文件的query都可能重复。要你按照query的频度排序。
3. 1000万字符串，其中有些是相同的(重复),需要把重复的全部去掉，保留没有重复的字符串。请问怎么设计和实现？
4. 上面的**第8题**：一个文本文件，大约有一万行，每行一个词，要求统计出其中最频繁出现的前10个词。其解决方法是：用trie树统计每个词出现的次数，时间复杂度是O(n*le)（le表示单词的平准长度），然后是找出出现最频繁的前10个词。

更多有关Trie树的介绍，请参见此文：[从Trie树（字典树）谈到后缀树](http://blog.csdn.net/v_july_v/article/details/6897097)。

**数据库索引**

适用范围：大数据量的增删改查

基本原理及要点：利用数据的设计实现方法，对海量数据的增删改查进行处理。

* 关于数据库索引及其优化，更多可参见此文：<http://www.cnblogs.com/pkuoliver/archive/2011/08/17/mass-data-topic-7-index-and-optimize.html>；
* 关于MySQL索引背后的数据结构及算法原理，这里还有一篇很好的文章：<http://blog.codinglabs.org/articles/theory-of-mysql-index.html>；
* 关于B 树、B+ 树、B* 树及R 树，本blog内有篇绝佳文章：[从B树、B+树、B*树谈到R 树](07.02.md)。

**倒排索引(Inverted index)**

适用范围：搜索引擎，关键字查询

基本原理及要点：为何叫倒排索引？一种索引方法，被用来存储在全文搜索下某个单词在一个文档或者一组文档中的存储位置的映射。

以英文为例，下面是要被索引的文本：

	T0 = "it is what it is"  
	T1 = "what is it"  
	T2 = "it is a banana"  
	
我们就能得到下面的反向文件索引：

    "a":      {2}
    "banana": {2}
    "is":     {0, 1, 2}
    "it":     {0, 1, 2}
    "what":   {0, 1}

检索的条件"what","is"和"it"将对应集合的交集。

正向索引开发出来用来存储每个文档的单词的列表。正向索引的查询往往满足每个文档有序频繁的全文查询和每个单词在校验文档中的验证这样的查询。在正向索引中，文档占据了中心的位置，每个文档指向了一个它所包含的索引项的序列。也就是说文档指向了它包含的那些单词，而反向索引则是单词指向了包含它的文档，很容易看到这个反向的关系。

扩展：

问题实例：文档检索系统，查询那些文件包含了某单词，比如常见的学术论文的关键字搜索。


关于倒排索引的应用，更多请参见：

* [第二十三章：杨氏矩阵查找](03.02.md)，
* [第二十四章：倒排索引关键词Hash不重复编码实践](09.04.md)
* [第二十六章：基于给定的文档生成倒排索引的编码与实践](09.05.md)。
