##回文判断


### 题目描述

给定一个字符串，判断它是否是回文。

我们这里的回文（英文：palindrome）是指一个顺着读和反过来读都一样的字符串，比如“madam”、“信言不美，美言不信”和“哥曾信佛但佛信曾哥”等。这样的短句在智力性、趣味性和艺术性上都颇有特色。

### 分析与解法

回文判断是一类典型的问题，尤其是与字符串结合后呈现出多姿多彩，在实际中使用也比较广泛，而且也是面试题中的常客，所以本节就结合几个典型的例子来体味下回文之趣。

#### 解法一

初步观察回文的特点，最直接的方法显然是将字符串逆转，存入另外一个字符串，然后比较原字符串和逆转后的字符串是否一样，一样就是回文，这个方法的时空复杂度都是O(n)。

我们还可以从两头开始同时向中间扫描字串，如果直到相遇两端的字符都一样，那么这个字串就是一个回文。采用这种方法的话，我们只需要维护头部和尾部两个扫描指针即可，代码如下：

```cpp
/**  
 *检查字符串s是不是回文, 字符串s的长度为n 
 *Copyright(C) fairywell 2011 
 */  
bool IsPalindrome(const char *s, int n)  
{  
    if (s == NULL || n < 1) return false; // 非法输入  
    char *front, *back;  
    front = s; back = s + n - 1; // 初始化头指针和尾指针  
    while (front < back) {  
        if (*front != *back) 
          return false; // 不是回文，立即返回  
        ++front; 
        --back;  
    }  
    return true; // 是回文  
}  
```

这是一个直白且效率不错的实现，在附加 2 个额外指针的情况下，O(n)的时间复杂度内判断出字符串是否是回文。


#### 解法二

解法一的方法貌似是最优的方法，也达到考验程序员思维与表达能力的目的。但灵活使用C语言的一些库函数能提高程序的效率。  
解法二的思路是，翻转字符串，然后比较。我们需要实现翻转字符串和比较字符串的函数：  
1.在一些非标准的C函数库实现里，头文件string.h里定义了名为strrev的函数，提供翻转字符串的功能。但在标准的C函数库里并没有strrev的实现。若没有提供strrev我们便要实现一个翻转字符串的函数。  
2.比较字符串实际上是比较内存里的内容是否一样。C提供了memcmp方法，能快速比较两段内存。  


```cpp
/**  
 *Copyleft! 2014 ChanYu Leung  
 */  
#include<stdio.h>  
#include<string.h>  
//翻转字符串。  
char *strrev(char *str)  
{  
    char *p1, *p2;  
    if (! str || ! *str)  
        return str;  
    for (p1 = str, p2 = str + strlen(str) - 1  
        ; p2 > p1  
        ; ++p1, --p2)  
    {  
        //使用异或（xor）交换字符位置  
        *p1 ^= *p2;  
        *p2 ^= *p1;  
        *p1 ^= *p2;  
    }  
    return str;  
}  
  
int main(void)  
{  
    char s[] = "madam";  
    int mid = (int)(strlen(s) / 2);// 获取中间位置  
    strrev(s+mid);//翻转字符串的中间至末尾部分 "madam" => "mamad"  
    int n = memcmp(s,s+mid,mid); //直接使用内存比较函数  
    if(n == 0)  
        printf("you got a palindrome :) \n");  
    else  
        printf("not a palindrome :( \n");  
    return 0;  
}  
```
虽然上述代码并不直观，有些地方甚至用了不常见的技巧，并且回答的方向很可能不是出题者的意愿。但提出这种解法，更多是与读者共勉：编程是一件很有趣的事情，只要不断保持好奇心与进去心，你便能让计算机一天比一天强大。  


## 类似问题

1. 判断一条单向链表是不是“回文”  
2. 判断一个栈是不是“回文”  
3. 解法二的strrev函数仅对ASCII字符有效。如果是UTF-8编码，那该如何实现解法二中的strrev函数？  
